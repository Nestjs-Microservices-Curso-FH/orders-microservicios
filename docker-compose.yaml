# Docker Compose Configuration for API Restaurante
#
# IMPORTANTE: Este archivo usa variables de entorno que deben estar definidas
# en un archivo .env en la raíz del proyecto.
#
# PASO 1: Renombrar el archivo example.env a .env
#   mv example.env .env
#
# PASO 2: Configurar las variables en el archivo .env
#   - Las variables de ejemplo están en example.env
#   - Todas las variables ${VARIABLE} deben estar definidas en .env
#
# PASO 3: Iniciar los servicios
#   docker-compose up -d
#
# Servicios incluidos:
#   - PostgreSQL 17 (puerto 5444)
#   - MinIO Object Storage (puertos 9200/9201)
#   - pgAdmin (puerto 8091)

# version: '3'

services:
  postgresdb:
    image: postgres:17-alpine
    # restart: always
    ports:
      - '5445:5432'
    environment:
      POSTGRES_USER: ${DB_USER}
      POSTGRES_PASSWORD: ${DB_PASSWORD}
      POSTGRES_DB: ${DB_NAME}
    container_name: ${CONTAINER_NAMEDB}
    volumes:
      - ./postgres:/var/lib/postgresql/data
    networks:
      - network

  pgAdmin:
    image: elestio/pgadmin:REL-9_8
    # restart: always
    ports:
      - 8091:80
    environment:
      PGADMIN_DEFAULT_EMAIL: admin@gmail.com
      PGADMIN_DEFAULT_PASSWORD: 1234
    container_name: order-pga
    networks:
      - network

networks:
  network:
    driver: bridge
